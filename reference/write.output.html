<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Output generation and visualization — write.output • RAPTOR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Output generation and visualization — write.output" />
<meta property="og:description" content="Generating final output graphs and files for the row and position detection. Input data should be provided as produced by pos.det." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RAPTOR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/the-hull/RAPTOR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Output generation and visualization</h1>
    <small class="dont-index">Source: <a href='https://github.com/the-hull/RAPTOR/blob/master/R/write.output.R'><code>R/write.output.R</code></a></small>
    <div class="hidden name"><code>write.output.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generating final output graphs and files for the row and position detection. Input data should be provided as produced by <code><a href='pos.det.html'>pos.det</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>write.output</span>(<span class='no'>input</span>, <span class='no'>location</span>, <span class='kw'>flip</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>input</th>
      <td><p>a <code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></code> produced by <code><a href='pos.det.html'>pos.det</a></code>.</p></td>
    </tr>
    <tr>
      <th>location</th>
      <td><p>an optional character string containing the location where the output .pdf and .txt file should be stored. If not supplied, the function returns the computed output, which can be stored in an object.</p></td>
    </tr>
    <tr>
      <th>flip</th>
      <td><p>logical flag indicating in which direction to plot the cells, i.e. with earlywood at the bottom (default; flip = <code><a href='https://rdrr.io/r/base/logical.html'>FALSE</a></code>) or at the top (flip = <code><a href='https://rdrr.io/r/base/logical.html'>TRUE</a></code>).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Plots the detected radial files and writes output according to the <code><a href='is.raptor.html'>is.raptor</a></code> format.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Function that aids in graphing the output and writing output tables. The generated <code><a href='https://rdrr.io/r/base/plot.html'>plot</a></code> provides an overview of the detected cells, rows, and the position of the cells within each radial file. The output table provides the standard output table with three additional columns containing; the "ROW" number and "POSITION" within the row and the "MARKER" column (cf. <code><a href='pos.det.html'>pos.det</a></code>. This output can provide crucial information that can be used with other packages to generate tracheidograms (cf. de la Cruz &amp; DeSoto, 2015) and link the output to xylogenesis data (cf. Rathgeber et al., 2011).</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>de la Cruz, M., &amp; DeSoto, L. (2015) tgram: Functions to compute and plot tracheidograms. CRAN: https://cran.r-project.org/web/packages/tgram/tgram.pdf.<br />
<br />
Rathgeber, C.B.K., Longuetaud, F., Mothe, F., Cuny, H., &amp; Le Moguedec, G. (2011) Phenology of wood formation: Data processing, analysis and visualisation using R (package CAVIAR). Dendrochronologia 29, 139-149.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'>#example to write output</span>
<span class='no'>input</span><span class='kw'>&lt;-</span><span class='fu'><a href='is.raptor.html'>is.raptor</a></span>(<span class='fu'><a href='example.data.html'>example.data</a></span>(<span class='kw'>species</span><span class='kw'>=</span><span class='st'>"SIB_LARIX"</span>), <span class='kw'>str</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>aligned</span><span class='kw'>&lt;-</span><span class='fu'><a href='align.html'>align</a></span>(<span class='no'>input</span>)
<span class='no'>first</span><span class='kw'>&lt;-</span><span class='fu'><a href='first.cell.html'>first.cell</a></span>(<span class='no'>aligned</span>, <span class='kw'>frac.small</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>yrs</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>make.plot</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>output</span><span class='kw'>&lt;-</span><span class='fu'><a href='pos.det.html'>pos.det</a></span>(<span class='no'>first</span>, <span class='kw'>swe</span> <span class='kw'>=</span> <span class='fl'>0.3</span>, <span class='kw'>sle</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>ec</span> <span class='kw'>=</span> <span class='fl'>1.5</span>, <span class='kw'>swl</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>sll</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>lc</span> <span class='kw'>=</span> <span class='fl'>15</span>,
                <span class='kw'>prof.co</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>max.cells</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>yrs</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>aligning</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>make.plot</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>sib_larix</span><span class='kw'>&lt;-</span><span class='fu'>write.output</span>(<span class='no'>output</span>)

<span class='co'>#removing rows which are unsuitable</span>
<span class='no'>corrections</span><span class='kw'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>year</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2010</span>,<span class='fl'>2010</span>,<span class='fl'>2010</span>,<span class='fl'>2009</span>,<span class='fl'>2009</span>,<span class='fl'>2009</span>,<span class='fl'>2009</span>,<span class='fl'>2008</span>,<span class='fl'>2008</span>,
                        <span class='fl'>2008</span>,<span class='fl'>2008</span>,<span class='fl'>2008</span>,<span class='fl'>2008</span>,<span class='fl'>2007</span>,<span class='fl'>2007</span>,<span class='fl'>2007</span>),
                        <span class='kw'>row</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>19</span>,<span class='fl'>15</span>,<span class='fl'>9</span>,<span class='fl'>6</span>,<span class='fl'>11</span>,<span class='fl'>14</span>,<span class='fl'>17</span>,<span class='fl'>5</span>,<span class='fl'>6</span>,<span class='fl'>14</span>,<span class='fl'>17</span>,<span class='fl'>24</span>,<span class='fl'>15</span>,<span class='fl'>2</span>,<span class='fl'>8</span>,<span class='fl'>14</span>))
<span class='kw'>for</span>(<span class='no'>i</span> <span class='kw'>in</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>:<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='no'>corrections</span>))){
<span class='no'>sib_larix</span>[<span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span>(<span class='no'>sib_larix</span>[,<span class='st'>"YEAR"</span>]<span class='kw'>==</span><span class='no'>corrections</span>[<span class='no'>i</span>,<span class='fl'>1</span>]  <span class='kw'>&amp;</span>
          <span class='no'>sib_larix</span>[,<span class='st'>"ROW"</span>]<span class='kw'>==</span><span class='no'>corrections</span>[<span class='no'>i</span>,<span class='fl'>2</span>] ),<span class='st'>"POSITION"</span>]<span class='kw'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>NA</span>,<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>sib_larix</span>[
          <span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span>(<span class='no'>sib_larix</span>[,<span class='st'>"YEAR"</span>]<span class='kw'>==</span><span class='no'>corrections</span>[<span class='no'>i</span>,<span class='fl'>1</span>]<span class='kw'>&amp;</span> <span class='no'>sib_larix</span>[,<span class='st'>"ROW"</span>]<span class='kw'>==</span><span class='no'>corrections</span>[<span class='no'>i</span>,<span class='fl'>2</span>] ),
          <span class='st'>"POSITION"</span>]))
<span class='no'>sib_larix</span>[<span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span>(<span class='no'>sib_larix</span>[,<span class='st'>"YEAR"</span>]<span class='kw'>==</span><span class='no'>corrections</span>[<span class='no'>i</span>,<span class='fl'>1</span>]  <span class='kw'>&amp;</span>
          <span class='no'>sib_larix</span>[,<span class='st'>"ROW"</span>]<span class='kw'>==</span><span class='no'>corrections</span>[<span class='no'>i</span>,<span class='fl'>2</span>] ),<span class='st'>"ROW"</span>]<span class='kw'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>NA</span>,<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>sib_larix</span>[
          <span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span>(<span class='no'>sib_larix</span>[,<span class='st'>"YEAR"</span>]<span class='kw'>==</span><span class='no'>corrections</span>[<span class='no'>i</span>,<span class='fl'>1</span>]<span class='kw'>&amp;</span><span class='no'>sib_larix</span>[,<span class='st'>"ROW"</span>]<span class='kw'>==</span><span class='no'>corrections</span>[<span class='no'>i</span>,<span class='fl'>2</span>] ),
          <span class='st'>"POSITION"</span>]))}
<span class='no'>SIB_LARIX</span><span class='kw'>&lt;-</span><span class='fu'>write.output</span>(<span class='no'>sib_larix</span>)
<span class='kw'>for</span>(<span class='no'>i</span> <span class='kw'>in</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>:<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span>(<span class='no'>SIB_LARIX</span>[,<span class='st'>"YEAR"</span>])))){
<span class='no'>row_id</span><span class='kw'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span>(<span class='no'>SIB_LARIX</span>[<span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span>(<span class='no'>SIB_LARIX</span>[,<span class='st'>"YEAR"</span>]<span class='kw'>==</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span>(<span class='no'>SIB_LARIX</span>[,<span class='st'>"YEAR"</span>])[<span class='no'>i</span>]),<span class='st'>"ROW"</span>],
               <span class='kw'>na.rm</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='no'>row_id</span><span class='kw'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span>(<span class='no'>row_id</span>[<span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span>(<span class='no'>row_id</span>)])
<span class='kw'>for</span>(<span class='no'>j</span> <span class='kw'>in</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>:<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>row_id</span>))){
<span class='no'>SIB_LARIX</span>[<span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span>(<span class='no'>SIB_LARIX</span>[,<span class='st'>"YEAR"</span>]<span class='kw'>==</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span>(<span class='no'>SIB_LARIX</span>[,<span class='st'>"YEAR"</span>])[<span class='no'>i</span>] <span class='kw'>&amp;</span>
          <span class='no'>SIB_LARIX</span>[,<span class='st'>"ROW"</span>]<span class='kw'>==</span><span class='no'>row_id</span>[<span class='no'>j</span>]), <span class='st'>"ROW"</span>]<span class='kw'>&lt;-</span><span class='no'>j</span>
}}
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Richard L. Peters, Patrick Fonti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


